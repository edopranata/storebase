import{P as f,C as I,A as U,c as k,a as r,w as h,u as n,b as t,t as c,F as j,f as A,j as g,i as _,v as u,g as C,o as m,X as N,d as v,_ as T,U as B,n as D,S as F}from"./app.5e913b12.js";import{_ as $,a as E}from"./Breadcrumb.6f6c19fb.js";import{_ as L}from"./Pagination.8c5f5a81.js";const M=t("title",null,"Stock Adjustment",-1),O={class:"px-4 grid gap-4"},P={class:"grid grid-cols-2 gap-2"},z={class:"stats bg-primary text-primary-content"},G={class:"stat"},K={class:"stat-title"},X={class:"stat-value"},q={class:"stat-actions"},H={class:"stats bg-primary text-primary-content"},J={class:"stat"},Q={class:"stat-title"},R={class:"stat-value"},W={class:"stat-actions flex justify-end space-x-2"},Y={class:"badge p-4 rounded-lg"},Z={class:"badge p-4 rounded-lg"},tt={class:"w-full text-left text-base"},st=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6",rowspan:"2"},"#"),t("th",{class:"py-3 px-6",rowspan:"2"},"Tanggal"),t("th",{class:"py-3 px-6",rowspan:"2"},"Keterangan"),t("th",{class:"py-3 px-6",rowspan:"2"},"Supplier"),t("th",{class:"py-3 px-6",rowspan:"2"},"Inventory"),t("th",{class:"py-3 px-6 text-center border-b-1 border-gray-800",colspan:"3"},"Stock Adjustment"),t("th",{class:"py-3 px-6",rowspan:"2"},"Satuan")]),t("tr",null,[t("th",{class:"py-3 px-6"},"Current"),t("th",{class:"py-3 px-6"},"Adjustment"),t("th",{class:"py-3 px-6"},"Ending")])],-1),et={class:"border-b"},at={class:"py-4 px-6"},ot={class:"py-4 px-6"},nt={class:"py-4 px-6"},ct={class:"py-4 px-6"},lt={class:"py-4 px-6"},dt={class:"py-4"},it=["onUpdate:modelValue"],pt=["onUpdate:modelValue"],rt={class:"py-4"},_t=["onUpdate:modelValue","onChange","max","min"],ut={class:"py-4"},mt=["onUpdate:modelValue"],kt={class:"py-4 px-6"},ht=["disabled","onClick"],gt={class:"py-4 px-6 text-right",colspan:"7"},bt={key:0,class:"text-sm text-error"},yt={class:"py-4"},ft={class:"py-4 px-6"},wt={__name:"DetailsEdit",props:{details:Object,adj_left:Number,stocks:{type:Object}},setup(x){const e=x,w=[{url:route("app.index"),label:"Beranda"},{url:route("app.management.index"),label:"Product"},{url:route("app.management.stock.index"),label:"Stock Adjustment"},{url:route("app.management.stock.edit",e.details.adjustment_id),label:e.details.adjustment.title},{url:null,label:"Details Stock"}],s=f({id:[],first_stock:[],opening_stock:[],adjustment_stock:[],ending_stock:[],total:0}),p=f({stock_id:"",adjustment_stock:"",ending_stock:""});I(()=>{b(),y(s.ending_stock)}),U(()=>F.cloneDeep(s),(a,o)=>{a&&y(a.ending_stock)});const V=(a,o)=>{p.stock_id=a,p.ending_stock=s.ending_stock[o],p.adjustment_stock=s.adjustment_stock[o],p.patch(route("app.management.details.update",e.details.id),{onSuccess:()=>{b()}})},b=()=>{e.stocks.data.forEach(function(a,o){s.id[o]=a.id,s.first_stock[o]=a.first_stock,s.opening_stock[o]=a.available_stock,s.adjustment_stock[o]=0,s.ending_stock[o]=a.available_stock})},y=a=>{let o=a.reduce((l,d)=>l+=d,0);s.total=o},S=(a,o)=>{let l=isNaN(parseInt(s.opening_stock[a])+parseInt(o))?s.opening_stock[a]:parseInt(s.opening_stock[a])+parseInt(o);s.ending_stock[a]=l};return(a,o)=>(m(),k(j,null,[r(n(N),null,{default:h(()=>[M]),_:1}),r(E,{links:w}),r($,{classes:"bg-base-content",class:""},{default:h(()=>[v("Stock Adjustment")]),_:1}),t("section",O,[t("div",P,[t("div",z,[t("div",G,[t("div",K,c(e.details.adjustment.title),1),t("div",X,c(Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(e.adj_left)),1),t("div",q,[r(n(D),{as:"button",href:a.route("app.management.stock.edit",e.details.adjustment_id),class:"btn btn-sm btn-success"},{default:h(()=>[r(T,{size:"20",path:n(B)},null,8,["path"]),v(" Back ")]),_:1},8,["href"])])])]),t("div",H,[t("div",J,[t("div",Q,c(e.details.product.barcode)+" "+c(e.details.product.name),1),t("div",R,c(e.details.stocks_sum_available_stock)+" "+c(e.details.product.unit.name),1),t("div",W,[t("span",Y,"Gudang "+c(e.details.product.warehouse_stock)+" "+c(e.details.product.unit.name),1),t("span",Z,"Toko "+c(e.details.product.store_stock)+" "+c(e.details.product.unit.name),1)])])])]),t("table",tt,[st,t("tbody",null,[e.stocks.data.length?(m(!0),k(j,{key:0},A(e.stocks.data,(l,d)=>(m(),k("tr",et,[t("th",at,c(e.stocks.from+d),1),t("td",ot,c(l.created_at),1),t("td",nt,c(l.description),1),t("td",ct,c(l.supplier?l.supplier.name:""),1),t("td",lt,c(l.first_stock),1),t("td",dt,[_(t("input",{"onUpdate:modelValue":i=>n(s).id[d]=i,type:"hidden"},null,8,it),[[u,n(s).id[d]]]),_(t("input",{"onUpdate:modelValue":i=>n(s).opening_stock[d]=i,type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,8,pt),[[u,n(s).opening_stock[d]]])]),t("td",rt,[_(t("input",{"onUpdate:modelValue":i=>n(s).adjustment_stock[d]=i,onChange:i=>S(d,i.target.value),type:"number",max:parseInt(l.first_stock)-parseInt(l.available_stock),min:parseInt(n(s).opening_stock[d]*-1),placeholder:"Type here",class:"input input-bordered w-full w-32"},null,40,_t),[[u,n(s).adjustment_stock[d]]])]),t("td",ut,[_(t("input",{"onUpdate:modelValue":i=>n(s).ending_stock[d]=i,type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,8,mt),[[u,n(s).ending_stock[d]]])]),t("td",kt,[t("button",{type:"button",disabled:n(p).processing,class:"btn btn-sm btn-primary rounded-none",onClick:i=>V(l.id,d)},"Adjust",8,ht)])]))),256)):g("",!0),t("tr",null,[t("td",gt,[n(p).errors.ending_stock?(m(),k("span",bt,c(n(p).errors.ending_stock),1)):g("",!0)]),t("td",yt,[_(t("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>n(s).total=l),type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,512),[[u,n(s).total]])]),t("td",ft,c(e.details.product.unit.name),1)])])]),e.stocks.data.length?(m(),C(L,{key:0,links:e.stocks.links},null,8,["links"])):g("",!0)])],64))}};export{wt as default};

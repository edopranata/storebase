import{P as j,C as I,A as U,c as h,a as r,w as k,u as c,b as t,t as n,p as A,F as v,f as C,j as g,i as _,v as u,g as N,o as m,X as T,d as x,_ as B,U as D,n as F,S as $}from"./app.8220ec02.js";import{_ as E,a as M}from"./Breadcrumb.55d4f8b7.js";import{_ as L}from"./Pagination.c992ee3f.js";const O=t("title",null,"Stock Adjustment",-1),P={class:"px-4 grid gap-4"},z={class:"grid grid-cols-2 gap-2"},G={class:"stats bg-primary text-primary-content"},K={class:"stat"},X={class:"stat-title"},q={class:"stat-value"},H={class:"stat-actions"},J={class:"stats bg-primary text-primary-content"},Q={class:"stat"},R={class:"stat-title"},W={class:"stat-value"},Y={class:"stat-actions flex justify-end space-x-2"},Z={class:"badge p-4 rounded-lg"},tt={class:"badge p-4 rounded-lg"},st=["onSubmit"],et={class:"w-full text-left text-base"},at=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6",rowspan:"2"},"#"),t("th",{class:"py-3 px-6",rowspan:"2"},"Tanggal"),t("th",{class:"py-3 px-6",rowspan:"2"},"Keterangan"),t("th",{class:"py-3 px-6",rowspan:"2"},"Supplier"),t("th",{class:"py-3 px-6",rowspan:"2"},"Inventory"),t("th",{class:"py-3 px-6 text-center border-b-1 border-gray-800",colspan:"3"},"Stock Adjustment"),t("th",{class:"py-3 px-6",rowspan:"2"},"Satuan")]),t("tr",null,[t("th",{class:"py-3 px-6"},"Current"),t("th",{class:"py-3 px-6"},"Adjustment"),t("th",{class:"py-3 px-6"},"Ending")])],-1),ot={class:"border-b"},nt={class:"py-4 px-6"},ct={class:"py-4 px-6"},lt={class:"py-4 px-6"},dt={class:"py-4 px-6"},it={class:"py-4 px-6"},pt={class:"py-4"},rt=["onUpdate:modelValue"],_t=["onUpdate:modelValue"],ut={class:"py-4"},mt=["onUpdate:modelValue","onChange","max","min"],ht={class:"py-4"},kt=["onUpdate:modelValue"],gt={class:"py-4 px-6"},bt=["onClick"],yt={class:"py-4 px-6 text-right",colspan:"7"},ft={key:0,class:"text-sm text-error"},jt={class:"py-4"},vt={class:"py-4 px-6"},Vt={__name:"DetailsEdit",props:{details:Object,adj_left:Number,stocks:{type:Object}},setup(w){const e=w,S=[{url:route("app.index"),label:"Beranda"},{url:route("app.management.index"),label:"Product"},{url:route("app.management.stock.index"),label:"Stock Adjustment"},{url:route("app.management.stock.edit",e.details.adjustment_id),label:e.details.adjustment.title},{url:null,label:"Details Stock"}],s=j({id:[],first_stock:[],opening_stock:[],adjustment_stock:[],ending_stock:[],total:0}),p=j({stock_id:"",adjustment_stock:"",ending_stock:""});I(()=>{y(),f(s.ending_stock)}),U(()=>$.cloneDeep(s),(a,o)=>{a&&f(a.ending_stock)});const b=(a,o)=>{p.stock_id=a,p.ending_stock=s.ending_stock[o],p.adjustment_stock=s.adjustment_stock[o],p.patch(route("app.management.details.update",e.details.id),{onSuccess:()=>{y()}})},y=()=>{e.stocks.data.forEach(function(a,o){s.id[o]=a.id,s.first_stock[o]=a.first_stock,s.opening_stock[o]=a.available_stock,s.adjustment_stock[o]=0,s.ending_stock[o]=a.available_stock})},f=a=>{let o=a.reduce((l,d)=>l+=d,0);s.total=o},V=(a,o)=>{let l=isNaN(parseInt(s.opening_stock[a])+parseInt(o))?s.opening_stock[a]:parseInt(s.opening_stock[a])+parseInt(o);s.ending_stock[a]=l};return(a,o)=>(m(),h(v,null,[r(c(T),null,{default:k(()=>[O]),_:1}),r(M,{links:S}),r(E,{classes:"bg-base-content",class:""},{default:k(()=>[x("Stock Adjustment")]),_:1}),t("section",P,[t("div",z,[t("div",G,[t("div",K,[t("div",X,n(e.details.adjustment.title),1),t("div",q,n(Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(e.adj_left)),1),t("div",H,[r(c(F),{as:"button",href:a.route("app.management.stock.edit",e.details.adjustment_id),class:"btn btn-sm btn-success"},{default:k(()=>[r(B,{size:"20",path:c(D)},null,8,["path"]),x(" Back ")]),_:1},8,["href"])])])]),t("div",J,[t("div",Q,[t("div",R,n(e.details.product.barcode)+" "+n(e.details.product.name),1),t("div",W,n(e.details.stocks_sum_available_stock)+" "+n(e.details.product.unit.name),1),t("div",Y,[t("span",Z,"Gudang "+n(e.details.product.warehouse_stock)+" "+n(e.details.product.unit.name),1),t("span",tt,"Toko "+n(e.details.product.store_stock)+" "+n(e.details.product.unit.name),1)])])])]),t("form",{onSubmit:A(b,["prevent"])},null,40,st),t("table",et,[at,t("tbody",null,[e.stocks.data.length?(m(!0),h(v,{key:0},C(e.stocks.data,(l,d)=>(m(),h("tr",ot,[t("th",nt,n(e.stocks.from+d),1),t("td",ct,n(l.created_at),1),t("td",lt,n(l.description),1),t("td",dt,n(l.supplier?l.supplier.name:""),1),t("td",it,n(l.first_stock),1),t("td",pt,[_(t("input",{"onUpdate:modelValue":i=>c(s).id[d]=i,type:"hidden"},null,8,rt),[[u,c(s).id[d]]]),_(t("input",{"onUpdate:modelValue":i=>c(s).opening_stock[d]=i,type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,8,_t),[[u,c(s).opening_stock[d]]])]),t("td",ut,[_(t("input",{"onUpdate:modelValue":i=>c(s).adjustment_stock[d]=i,onChange:i=>V(d,i.target.value),type:"number",max:parseInt(l.first_stock)-parseInt(l.available_stock),min:parseInt(c(s).opening_stock[d]*-1),placeholder:"Type here",class:"input input-bordered w-full w-32"},null,40,mt),[[u,c(s).adjustment_stock[d]]])]),t("td",ht,[_(t("input",{"onUpdate:modelValue":i=>c(s).ending_stock[d]=i,type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,8,kt),[[u,c(s).ending_stock[d]]])]),t("td",gt,[t("button",{type:"button",class:"btn btn-sm btn-primary rounded-none",onClick:i=>b(l.id,d)},"Adjust",8,bt)])]))),256)):g("",!0),t("tr",null,[t("td",yt,[c(p).errors.ending_stock?(m(),h("span",ft,n(c(p).errors.ending_stock),1)):g("",!0)]),t("td",jt,[_(t("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>c(s).total=l),type:"text",disabled:"",placeholder:"Type here",class:"input input-bordered w-full w-32"},null,512),[[u,c(s).total]])]),t("td",vt,n(e.details.product.unit.name),1)])])]),e.stocks.data.length?(m(),N(L,{key:0,links:e.stocks.links},null,8,["links"])):g("",!0)])],64))}};export{Vt as default};

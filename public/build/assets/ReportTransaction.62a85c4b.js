import{P as N,M as R,C as k,c as l,a as m,u as i,w as y,b as t,i as v,S as T,F as d,f as b,v as w,t as e,j as g,d as _,g as D,o as c,X as S,n as I}from"./app.1a1a22c1.js";import{_ as K,a as B}from"./Breadcrumb.856ee079.js";const P={class:"px-4 grid gap-4"},V=t("div",{class:"grid md:grid-cols-2"},null,-1),U=t("div",{class:"hidden badge-primary badge-secondary badge badge-accent badge-ghost badge-info badge-error"},null,-1),C={class:"card w-full rounded-none border-2 border-info shadow-xl"},L={class:"card-body grid md:grid-cols-2 gap-4"},M={class:"grid md:grid-cols-3"},j={class:"form-control p-1"},q=t("label",{class:"label"},[t("span",{class:"label-text"},"User / Kasir")],-1),A=["disabled"],$=t("option",{value:""},"Semua User",-1),G=["value"],E={class:"form-control p-1"},H=t("label",{class:"label"},[t("span",{class:"label-text"},"Tanggal")],-1),Q=["disabled"],X={key:0,class:"label"},z={class:"label-text-alt text-error"},J={class:"form-control p-1"},O=t("label",{class:"label"},[t("span",{class:"label-text"},"\xA0")],-1),W={class:"flex space-x-4"},Y={class:"card-body grid gap-4"},Z={class:"card-title"},tt={class:"w-full text-left text-base"},st=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6"},"No"),t("th",{class:"py-3 px-6"},"Kasir"),t("th",{class:"py-3 px-6"},"Tanggal"),t("th",{class:"py-3 px-6"},"Invoice"),t("th",{class:"py-3 px-6 text-right"},"Tagihan"),t("th",{class:"py-3 px-6 text-right"},"Diskon"),t("th",{class:"py-3 px-6 text-right"},"Total"),t("th",{class:"py-3 px-6 text-right"},"Pembayaran"),t("th",{class:"py-3 px-6 text-right"},"Uang Kembali"),t("th",{class:"py-3 px-6"},"Keterangan")])],-1),et={class:"group border-b"},rt={class:"group-hover:bg-base-300 py-2 px-6"},ot={class:"group-hover:bg-base-300 py-2 px-6"},at={class:"group-hover:bg-base-300 py-2 px-6"},nt={class:"group-hover:bg-base-300 py-2 px-6"},ct={class:"group-hover:bg-base-300 py-2 px-6 text-right"},lt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},it={class:"group-hover:bg-base-300 py-2 px-6 text-right"},ut={class:"group-hover:bg-base-300 py-2 px-6 text-right"},dt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},pt={class:"group-hover:bg-base-300 py-2 px-6"},ht={class:"group border-b"},_t=t("td",{class:"group-hover:bg-base-300 py-2 px-6",colspan:"3"},null,-1),bt={class:"group-hover:bg-base-300 py-2 px-6"},gt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},mt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},yt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},xt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},vt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},Dt=t("td",{class:"group-hover:bg-base-300 py-2 px-6"},"Retur",-1),It={key:1},ft={colspan:"10",class:"text-center border-b-2"},Ft={class:"group border-b"},Nt=t("th",{colspan:"4",class:"group-hover:bg-base-300 py-2 px-6 text-right"},"Total Penjualan",-1),Rt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},kt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},Tt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},wt=t("th",{colspan:"3",class:"group-hover:bg-base-300 py-2 px-6"},null,-1),St={class:"group border-b"},Kt=t("th",{colspan:"4",class:"group-hover:bg-base-300 py-2 px-6 text-right"},"Total retur",-1),Bt={colspan:"3",class:"group-hover:bg-base-300 py-2 px-6 text-right"},Pt=t("th",{colspan:"3",class:"group-hover:bg-base-300 py-2 px-6"},null,-1),Vt={class:"group border-b"},Ut=t("th",{colspan:"4",class:"group-hover:bg-base-300 py-2 px-6 text-right"},"Total Keseluruhan",-1),Ct={colspan:"3",class:"group-hover:bg-base-300 py-2 px-6 text-right"},Lt=t("th",{colspan:"3",class:"group-hover:bg-base-300 py-2 px-6"},null,-1),Mt={class:"card-body grid gap-4"},jt={class:"card-title"},qt={class:"w-full text-left text-base"},At=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6"},"No"),t("th",{class:"py-3 px-6"},"Kasir"),t("th",{class:"py-3 px-6"},"Tanggal"),t("th",{class:"py-3 px-6"},"Invoice"),t("th",{class:"py-3 px-6 text-right"},"Quantity Retur"),t("th",{class:"py-3 px-6 text-right"},"Harga"),t("th",{class:"py-3 px-6 text-right"},"Total"),t("th",{class:"py-3 px-6"},"Keterangan")])],-1),$t={class:"group border-b"},Gt={class:"group-hover:bg-base-300 py-2 px-6"},Et={class:"group-hover:bg-base-300 py-2 px-6"},Ht={class:"group-hover:bg-base-300 py-2 px-6"},Qt={class:"group-hover:bg-base-300 py-2 px-6"},Xt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},zt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},Jt={class:"group-hover:bg-base-300 py-2 px-6 text-right"},Ot={class:"group-hover:bg-base-300 py-2 px-6"},Wt={key:1},Yt={colspan:"8",class:"text-center border-b-2"},Zt=t("th",{colspan:"6",class:"group-hover:bg-base-300 py-2 px-6 text-right"},"Total Retur",-1),ts={class:"group-hover:bg-base-300 py-2 px-6 text-right"},ss=t("th",{class:"group-hover:bg-base-300 py-2 px-6"},null,-1),es={class:"card-body grid md:grid-cols-2 gap-4"},rs=t("div",null,null,-1),os={class:"w-full text-left text-base"},as=t("thead",null,[t("tr",{class:"border-b-2 py-2"},[t("th",{colspan:"2"},"Summaries Transaction")])],-1),ns={class:"border-b"},cs=t("th",{width:"250"},"Tanggal Transaksi ",-1),ls={class:"border-b"},is=t("th",null,"Total Penjualan",-1),us={class:"border-b"},ds=t("th",null,"Total Retur Barang",-1),ps={class:"border-b"},hs=t("th",null,"Subtotal",-1),gs={__name:"ReportTransaction",props:{date:String,user_id:String,transactions:Array,returns:Array,users:Array},setup(f){const a=f,F=[{url:route("app.index"),label:"Beranda"},{url:route("app.report.index"),label:"Laporan"},{url:null,label:"Transaksi"}],u=N({date:a.date?a.date:"",user_id:a.user_id?a.user_id:""}),r=R({total:{type:Number,default:0},sum_return:{type:Number,default:0},bill:{type:Number,default:0},discount:{type:Number,default:0},returns:{type:Number,default:0}});k(()=>{x()});const x=()=>{let n={total:[],bill:[],discount:[],sum_return:[],returns:[]};a.transactions.reduce((o,s)=>(n.total.push(s.total),n.bill.push(s.bill),n.discount.push(s.discount),n.sum_return.push(s.sum_return),n),[]),r.total=n.total.reduce((o,s)=>o+=s,0),r.sum_return=n.sum_return.reduce((o,s)=>o+=s,0),r.bill=n.bill.reduce((o,s)=>o+=s,0),r.discount=n.discount.reduce((o,s)=>o+=s,0),a.returns.reduce((o,s)=>(n.returns.push(s.total),n),[]),r.returns=n.returns.reduce((o,s)=>o+=s,0)};return(n,o)=>(c(),l(d,null,[m(i(S),{title:"Laporan Transaksi"}),m(B,{links:F}),m(K,{classes:"bg-base-content",class:""},{default:y(()=>[_("Laporan Transaksi")]),_:1}),t("section",P,[V,U,t("div",C,[t("div",L,[t("div",M,[t("div",j,[q,v(t("select",{disabled:i(u).processing,"onUpdate:modelValue":o[0]||(o[0]=s=>i(u).user_id=s),class:"select select-info select-bordered"},[$,(c(!0),l(d,null,b(a.users,(s,p)=>(c(),l("option",{value:s.id,key:p},e(s.name),9,G))),128))],8,A),[[T,i(u).user_id]])]),t("div",E,[H,v(t("input",{disabled:i(u).processing,"onUpdate:modelValue":o[1]||(o[1]=s=>i(u).date=s),type:"date",class:"input input-info input-bordered"},null,8,Q),[[w,i(u).date]]),i(u).errors.year?(c(),l("label",X,[t("span",z,e(i(u).errors.year),1)])):g("",!0)]),t("div",J,[O,t("div",W,[t("button",{type:"button",class:"btn",onClick:o[2]||(o[2]=s=>i(u).get(n.route("app.report.transaction.index"),{onSuccess:()=>{x()}}))},"Filter ")])])])]),t("div",Y,[t("h4",Z,"Transaksi : "+e(a.date),1),t("table",tt,[st,t("tbody",null,[a.transactions.length?(c(!0),l(d,{key:0},b(a.transactions,(s,p)=>(c(),l(d,null,[t("tr",et,[t("th",rt,e(1+p),1),t("td",ot,e(s.user),1),t("td",at,e(s.invoice_date),1),t("td",nt,e(s.invoice_number),1),t("td",ct,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.bill)),1),t("td",lt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.discount)),1),t("td",it,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.total)),1),t("td",ut,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.payment)),1),t("td",dt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.refund)),1),t("td",pt,e(s.status),1)]),s.returns.length?(c(!0),l(d,{key:0},b(s.returns,h=>(c(),l("tr",ht,[_t,t("td",bt,e(h.product_name),1),t("td",gt,e(h.quantity)+" x "+e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(h.sell_price)),1),t("td",mt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(0)),1),t("td",yt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(h.quantity*h.sell_price)),1),t("td",xt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(0)),1),t("td",vt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(0)),1),Dt]))),256)):g("",!0)],64))),256)):(c(),l("tr",It,[t("td",ft,[_("No Data "),a.transactions?g("",!0):(c(),D(i(I),{key:0,class:"link link-primary",href:n.route("app.report.transaction.index")},{default:y(()=>[_("Goto First Page")]),_:1},8,["href"]))])]))]),t("tfoot",null,[t("tr",Ft,[Nt,t("th",Rt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.bill)),1),t("th",kt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.discount)),1),t("th",Tt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.total)),1),wt]),t("tr",St,[Kt,t("th",Bt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.sum_return)),1),Pt]),t("tr",Vt,[Ut,t("th",Ct,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.total-r.sum_return)),1),Lt])])])]),t("div",Mt,[t("h4",jt,"Transaksi Retur : "+e(a.date),1),t("table",qt,[At,t("tbody",null,[a.returns.length?(c(!0),l(d,{key:0},b(a.returns,(s,p)=>(c(),l("tr",$t,[t("th",Gt,e(1+p),1),t("td",Et,e(s.user),1),t("td",Ht,e(s.invoice_date),1),t("td",Qt,e(s.invoice_number),1),t("td",Xt,e(s.quantity),1),t("td",zt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.sell_price)),1),t("td",Jt,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.total)),1),t("td",Ot,e(s.status),1)]))),256)):(c(),l("tr",Wt,[t("td",Yt,[_("No Data "),a.returns?g("",!0):(c(),D(i(I),{key:0,class:"link link-primary",href:n.route("app.report.transaction.index")},{default:y(()=>[_("Goto First Page")]),_:1},8,["href"]))])]))]),t("tfoot",null,[t("tr",null,[Zt,t("th",ts,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.returns)),1),ss])])])]),t("div",es,[rs,t("div",null,[t("table",os,[as,t("tbody",null,[t("tr",ns,[cs,t("td",null,e(a.date),1)]),t("tr",ls,[is,t("td",null,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.total-r.sum_return)),1)]),t("tr",us,[ds,t("td",null,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.returns)),1)]),t("tr",ps,[hs,t("td",null,e(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.total-r.sum_return-r.returns)),1)])])])])])])])],64))}};export{gs as default};
